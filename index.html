<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>Розподіл на команди</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding-top: 100px;
      background: #f0f0f0;
    }
    h1 {
      font-size: 2em;
    }
    button {
      margin: 10px;
      font-size: 1.2em;
      padding: 10px 30px;
      border-radius: 10px;
      border: none;
      background: #333;
      color: white;
      cursor: pointer;
    }
    #result {
      margin-top: 30px;
      font-size: 1.5em;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>Розподіл на команди</h1>
  <button onclick="getTeam()">Дізнатись</button>
  <div id="result"></div>

  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbxxt8SJF_O3Hesc2vnVt7rGWWQ5D0gJRN_-ifavD2WxkZbItc_v2hN5WW0cXbjACuiEQg/exec";
    const colors = {
      "Синій": "#007bff",
      "Червоний": "#dc3545",
      "Жовтий": "#ffc107"
    };

    function generateUID() {
      return 'uid-' + Math.random().toString(36).substr(2, 9);
    }

    function getTeam() {
      let uid = localStorage.getItem('teamUID');
      if (!uid) {
        uid = generateUID();
        localStorage.setItem('teamUID', uid);
      }

      fetch(`${API_URL}?uid=${uid}`)
        .then(res => res.json())
        .then(data => {
          if (data.team) {
            showTeam(data.team);
          } else {
            document.getElementById('result').textContent = "Помилка: " + data.error;
          }
        })
        .catch(err => {
          console.error(err);
          document.getElementById('result').textContent = "Помилка при з'єднанні.";
        });
    }

    function showTeam(team) {
      const result = document.getElementById('result');
      result.textContent = `Ваша команда: ${team}`;
      result.style.color = colors[team] || '#000';
    }
  </script>
</body>
</html>
